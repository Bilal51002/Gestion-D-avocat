<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestion des Secrétaires</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .profile-image {
            width: 50px;
            height: 50px;
            object-fit: cover;
            border-radius: 50%;
        }
        .search-container {
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
<div class="container py-4">
    <!-- Messages d'alerte -->
    <div class="row">
        <div class="col-12">
            <div th:if="${successMessage}" class="alert alert-success alert-dismissible fade show" role="alert">
                <span th:text="${successMessage}"></span>
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
            <div th:if="${errorMessage}" class="alert alert-danger alert-dismissible fade show" role="alert">
                <span th:text="${errorMessage}"></span>
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        </div>
    </div>

    <!-- En-tête -->
    <div class="row mb-4">
        <div class="col-12">
            <h1 class="text-primary"><i class="fas fa-user-tie me-2"></i>Gestion des Secrétaires</h1>
            <hr>
        </div>
    </div>

    <!-- Section de recherche -->
    <div class="row search-container">
        <div class="col-md-12">
            <div class="card">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0"><i class="fas fa-search me-2"></i>Rechercher</h5>
                </div>
                <!-- Onglet Secrétaire -->
<!--                <div class="tab-pane fade" id="secretaire" role="tabpanel" aria-labelledby="secretaire-tab">-->
<!--                    <form th:action="@{/Secretaire/secretaires/add}" method="POST" enctype="multipart/form-data" class="needs-validation" novalidate>-->
<!--                        <h3>انشاء حساب كاتبة</h3>-->
<!--                        <div class="row register-form">-->
<!--                            <div class="col-md-6">-->
<!--                                <div class="form-group">-->
<!--                                    <input type="text" class="form-control" placeholder="الاسم" name="Sname" required />-->
<!--                                    <div class="invalid-feedback">الرجاء إدخال الاسم</div>-->
<!--                                </div>-->
<!--                                <div class="form-group">-->
<!--                                    <input type="text" class="form-control" placeholder="النسب" name="Slast" required />-->
<!--                                    <div class="invalid-feedback">الرجاء إدخال النسب</div>-->
<!--                                </div>-->
<!--                                <div class="form-group">-->
<!--                                    <select class="form-control" name="bureau" required>-->
<!--                                        <option value="" selected disabled>تحديد المكتب</option>-->
<!--                                        <option th:each="bureau:${bureaux}" th:value="${bureau.id}" th:text="${bureau.nom}"></option>-->
<!--                                    </select>-->
<!--                                    <div class="invalid-feedback">الرجاء اختيار المكتب</div>-->
<!--                                </div>-->
<!--                                <div class="form-group">-->
<!--                                    <input type="tel" pattern="0[5-7]\d{8}" class="form-control" placeholder="رقم الهاتف" name="Stel" required />-->
<!--                                    <div class="invalid-feedback">رقم الهاتف يجب أن يبدأ ب 05، 06 أو 07 ويتكون من 10 أرقام</div>-->
<!--                                </div>-->
<!--                            </div>-->
<!--                            <div class="col-md-6">-->
<!--                                <div class="form-group">-->
<!--                                    <input type="tel"  class="form-control" placeholder="الهاتف الثابت" name="Stelfixe" />-->
<!--                                    <div class="invalid-feedback">رقم الهاتف الثابت يجب أن يتكون من 10 أرقام</div>-->
<!--                                </div>-->
<!--                                <div class="form-group">-->
<!--                                    <input type="text"  class="form-control" placeholder="البطاقة الوطنية" name="SCarte" required />-->
<!--                                    <div class="invalid-feedback">رقم البطاقة الوطنية يجب أن يكون 8 أرقام</div>-->
<!--                                </div>-->
<!--                                <div class="form-group">-->
<!--                                    <input type="text" class="form-control" placeholder="العنوان" name="Sadresse"  required />-->
<!--                                    <div class="invalid-feedback">الرجاء إدخال العنوان بشكل صحيح</div>-->
<!--                                </div>-->
<!--                                <div class="form-group">-->
<!--                                    <input type="email" class="form-control" placeholder="البريد الالكتروني" name="Semail" required />-->
<!--                                    <div class="invalid-feedback">الرجاء إدخال بريد إلكتروني صحيح</div>-->
<!--                                </div>-->
<!--                                <div class="form-group">-->
<!--                                    <input type="password" class="form-control" placeholder="كلمة السر" name="Spassw"  required />-->
<!--                                    <div class="invalid-feedback">كلمة السر يجب أن تكون 8 أحرف على الأقل</div>-->
<!--                                </div>-->
<!--                                <div class="form-group">-->
<!--                                    <input type="password" class="form-control" placeholder="اعادة كلمة السر" name="confirmPassword" required />-->
<!--                                    <div class="invalid-feedback">كلمة السر غير متطابقة</div>-->
<!--                                </div>-->
<!--                                <div class="form-group">-->
<!--                                    <input type="date" class="form-control" name="SDate" required />-->
<!--                                    <div class="invalid-feedback">الرجاء اختيار تاريخ</div>-->
<!--                                </div>-->
<!--                                <div class="custom-file">-->
<!--                                    <input type="file" class="custom-file-input" id="secretaireImage" name="file" accept="image/*">-->
<!--                                    <label class="custom-file-label" for="secretaireImage">اضافة صورة</label>-->
<!--                                </div>-->
<!--                                <div class="mt-4 d-grid">-->
<!--                                    <button class="btn btn-primary waves-effect waves-light" type="submit"><b>تسجيل</b></button>-->
<!--                                </div>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                    </form>-->
<!--                </div>-->

                <!-- Liste des secrétaires -->
    <div class="row mb-4">
        <div class="col-md-12">
            <div class="card">
                <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
                    <h5 class="mb-0"><i class="fas fa-list me-2"></i>Liste des Secrétaires</h5>
                    <button type="button" class="btn btn-light" data-bs-toggle="modal" data-bs-target="#addSecretaireModal">
                        <i class="fas fa-plus me-2"></i>Ajouter un Secrétaire
                    </button>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-striped table-hover">
                            <thead>
                            <tr>
                                <th>Photo</th>
                                <th>Nom</th>
                                <th>Prénom</th>
                                <th>Email</th>
                                <th>Téléphone</th>
                                <th>Adresse</th>
                                <th>Date Création</th>
                                <th>Actions</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr th:if="${secretaires.isEmpty()}">
                                <td colspan="8" class="text-center">Aucun secrétaire trouvé</td>
                            </tr>
                            <tr th:each="secretaire : ${secretaires}">
<!--                                <td>-->
<!--                                    <img th:if="${secretaire.image != null}" th:src="@{'/images/' + ${secretaire.image}}" class="profile-image" alt="Photo">-->
<!--                                    <img th:unless="${secretaire.image != null}" src="/api/placeholder/50/50" class="profile-image" alt="Photo par défaut">-->
<!--                                </td>-->
                                <td th:text="${secretaire.lastName}"></td>
                                <td th:text="${secretaire.firstName}"></td>
                                <td th:text="${secretaire.email}"></td>
                                <td th:text="${secretaire.tel}"></td>
                                <td th:text="${secretaire.adresse}"></td>
                                <td th:text="${#dates.format(secretaire.dateCreation, 'dd/MM/yyyy')}"></td>
                                <td>
                                    <div class="btn-group">
                                        <a th:href="@{'/Secretaire/edit/' + ${secretaire.id}}" class="btn btn-sm btn-warning">
                                            <i class="fas fa-edit"></i>
                                        </a>
                                        <a th:href="@{'/Secretaire/delete/' + ${secretaire.id}}" class="btn btn-sm btn-danger"
                                           onclick="return confirm('Êtes-vous sûr de vouloir supprimer ce secrétaire?')">
                                            <i class="fas fa-trash"></i>
                                        </a>
                                        <a th:href="@{'/Secretaire/details/' + ${secretaire.id}}" class="btn btn-sm btn-info">
                                            <i class="fas fa-eye"></i>
                                        </a>
                                    </div>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Information supplémentaire -->
    <div class="row" th:if="${avocat != null}">
        <div class="col-md-12">
            <div class="card">
                <div class="card-header bg-info text-white">
                    <h5 class="mb-0">Avocats trouvés</h5>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-striped">
                            <thead>
                            <tr>
                                <th>Nom</th>
                                <th>Prénom</th>
                                <th>Email</th>
                                <th>Téléphone</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr th:each="avo : ${avocat}">
                                <td th:text="${avo.lastName}"></td>
                                <td th:text="${avo.firstName}"></td>
                                <td th:text="${avo.email}"></td>
                                <td th:text="${avo.tel}"></td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal Ajout Secrétaire -->
<div class="modal fade" id="addSecretaireModal" tabindex="-1" aria-labelledby="addSecretaireModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header bg-primary text-white">
                <h5 class="modal-title" id="addSecretaireModalLabel">Ajouter un nouveau secrétaire</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form action="/Secretaire/secretaires/add" method="post" enctype="multipart/form-data">
                    <div class="row g-3">
                        <div class="col-md-6">
                            <label for="Sname" class="form-label">Prénom *</label>
                            <input type="text" class="form-control" id="Sname" name="Sname" required>
                        </div>
                        <div class="col-md-6">
                            <label for="Slast" class="form-label">Nom *</label>
                            <input type="text" class="form-control" id="Slast" name="Slast" required>
                        </div>
                        <div class="col-md-6">
                            <label for="Semail" class="form-label">Email *</label>
                            <input type="email" class="form-control" id="Semail" name="Semail" required>
                        </div>
                        <div class="col-md-6">
                            <label for="Spassw" class="form-label">Mot de passe *</label>
                            <input type="password" class="form-control" id="Spassw" name="Spassw" required>
                        </div>
                        <div class="col-md-6">
                            <label for="Stel" class="form-label">Téléphone portable</label>
                            <input type="tel" class="form-control" id="Stel" name="Stel">
                        </div>
                        <div class="col-md-6">
                            <label for="Stelfixe" class="form-label">Téléphone fixe</label>
                            <input type="tel" class="form-control" id="Stelfixe" name="Stelfixe">
                        </div>
                        <div class="col-md-12">
                            <label for="Sadresse" class="form-label">Adresse</label>
                            <textarea class="form-control" id="Sadresse" name="Sadresse" rows="3"></textarea>
                        </div>
                        <div class="col-md-6">
                            <label for="SDate" class="form-label">Date de création</label>
                            <input type="date" class="form-control" id="SDate" name="SDate">
                        </div>
                        <div class="col-md-6">
                            <label for="SCarte" class="form-label">Carte Nationale</label>
                            <input type="text" class="form-control" id="SCarte" name="SCarte">
                        </div>
                        <div class="col-md-12">
                            <label for="file" class="form-label">Photo</label>
                            <input class="form-control" type="file" id="file" name="file">
                        </div>
                        <div class="col-12 text-end">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                            <button type="submit" class="btn btn-primary">Enregistrer</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
</body>
</html>